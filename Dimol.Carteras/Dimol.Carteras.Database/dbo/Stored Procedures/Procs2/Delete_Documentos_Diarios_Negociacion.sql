create Procedure Delete_Documentos_Diarios_Negociacion(@ddi_codemp integer, @ddi_sucid integer, @ddi_anioneg smallint, @ddi_negid integer, @ddi_edcid integer, @dde_usrid integer, @dde_comentario varchar(500)) as    insert into documentos_diarios_estados    SELECT documentos_diarios.ddi_codemp,              documentos_diarios.ddi_sucid,              documentos_diarios.ddi_anio,              documentos_diarios.ddi_numdoc,              @ddi_edcid,              getdate(),           @dde_usrid,            @dde_comentario      FROM documentos_diarios       WHERE ( documentos_diarios.ddi_codemp = @ddi_codemp ) AND             ( documentos_diarios.ddi_sucid = @ddi_sucid ) AND             ( documentos_diarios.ddi_anioneg = @ddi_anioneg ) AND             ( documentos_diarios.ddi_negid = @ddi_negid ) AND             ( documentos_diarios.ddi_saldo > 0 )           UPDATE documentos_diarios         SET ddi_edcid = @ddi_edcid,              ddi_saldo = 0      FROM documentos_diarios       WHERE ( documentos_diarios.ddi_codemp = @ddi_codemp ) AND             ( documentos_diarios.ddi_sucid = @ddi_sucid ) AND             ( documentos_diarios.ddi_anioneg = @ddi_anioneg ) AND             ( documentos_diarios.ddi_negid = @ddi_negid ) AND             ( documentos_diarios.ddi_saldo > 0 )  